# Format and re-stage any staged Rust files
RUST_FILES=$(git diff --cached --name-only --diff-filter=ACM "*.rs" | grep "^src-tauri/" || true)
if [ -n "$RUST_FILES" ]; then
  echo "ðŸ¦€ Formatting Rust code..."
  cd src-tauri && cargo fmt && cd ..
  echo "ðŸ“¦ Re-staging formatted Rust files..."
  git add $RUST_FILES
fi

# Run lint-staged for JavaScript/TypeScript/Svelte files
echo "ðŸŽ¨ Formatting staged files with Prettier..."
npx lint-staged
