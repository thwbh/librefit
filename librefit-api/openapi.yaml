---
openapi: 3.0.3
info:
  title: librefit-service API
  version: 1.0.0-SNAPSHOT
servers:
- url: http://localhost:8080
  description: Auto generated value
- url: http://0.0.0.0:8080
  description: Auto generated value
paths:
  /goals/create:
    post:
      tags:
      - Goals Resource
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Goal'
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Goal'
  /goals/delete/{id}:
    delete:
      tags:
      - Goals Resource
      parameters:
      - name: id
        in: path
        required: true
        schema:
          format: int64
          type: integer
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: boolean
  /goals/latest/{userId}:
    get:
      tags:
      - Goals Resource
      parameters:
      - name: userId
        in: path
        required: true
        schema:
          format: int64
          type: integer
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Goal'
  /goals/list/{userId}:
    get:
      tags:
      - Goals Resource
      parameters:
      - name: userId
        in: path
        required: true
        schema:
          format: int64
          type: integer
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Goal'
  /goals/read/{id}:
    get:
      tags:
      - Goals Resource
      parameters:
      - name: id
        in: path
        required: true
        schema:
          format: int64
          type: integer
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Goal'
  /goals/update:
    put:
      tags:
      - Goals Resource
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Goal'
      responses:
        "204":
          description: No Content
  /tdee/calculate/{age}/{sex}/{weight}/{height}/{activityLevel}/{diff}/{gain}:
    get:
      tags:
      - Tdee Resource
      parameters:
      - name: activityLevel
        in: path
        required: true
        schema:
          format: float
          type: number
      - name: age
        in: path
        required: true
        schema:
          format: int32
          type: integer
      - name: diff
        in: path
        required: true
        schema:
          format: float
          type: number
      - name: gain
        in: path
        required: true
        schema:
          $ref: '#/components/schemas/CalculationGoal'
      - name: height
        in: path
        required: true
        schema:
          format: int32
          type: integer
      - name: sex
        in: path
        required: true
        schema:
          $ref: '#/components/schemas/CalculationSex'
      - name: weight
        in: path
        required: true
        schema:
          format: int32
          type: integer
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tdee'
  /tracker/calories/create:
    post:
      tags:
      - Calorie Tracker Resource
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CalorieTrackerEntry'
      responses:
        "201":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CalorieTrackerEntry'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "500":
          description: Internal Server Error
  /tracker/calories/delete/{userId}/{date}/{id}:
    delete:
      tags:
      - Calorie Tracker Resource
      parameters:
      - name: date
        in: path
        required: true
        schema:
          $ref: '#/components/schemas/LocalDate'
      - name: id
        in: path
        required: true
        schema:
          format: int64
          type: integer
      - name: userId
        in: path
        required: true
        schema:
          format: int64
          type: integer
      responses:
        "200":
          description: OK
          content:
            application/json: {}
        "304":
          description: Not Modified
        "404":
          description: Not Found
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "500":
          description: Internal Server Error
  /tracker/calories/list/{userId}/dates:
    get:
      tags:
      - Calorie Tracker Resource
      parameters:
      - name: userId
        in: path
        required: true
        schema:
          format: int64
          type: integer
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/LocalDate'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "500":
          description: Internal Server Error
  /tracker/calories/list/{userId}/{date}:
    get:
      tags:
      - Calorie Tracker Resource
      parameters:
      - name: date
        in: path
        required: true
        schema:
          $ref: '#/components/schemas/LocalDate'
      - name: userId
        in: path
        required: true
        schema:
          format: int64
          type: integer
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CalorieTrackerEntry'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "500":
          description: Internal Server Error
  /tracker/calories/read/{userId}/{date}/{id}:
    get:
      tags:
      - Calorie Tracker Resource
      parameters:
      - name: date
        in: path
        required: true
        schema:
          $ref: '#/components/schemas/LocalDate'
      - name: id
        in: path
        required: true
        schema:
          format: int64
          type: integer
      - name: userId
        in: path
        required: true
        schema:
          format: int64
          type: integer
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CalorieTrackerEntry'
        "404":
          description: Not Found
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "500":
          description: Internal Server Error
  /tracker/calories/update:
    put:
      tags:
      - Calorie Tracker Resource
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CalorieTrackerEntry'
      responses:
        "200":
          description: OK
          content:
            application/json: {}
        "304":
          description: Not Modified
        "404":
          description: Not Found
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "500":
          description: Internal Server Error
  /tracker/weight/create:
    post:
      tags:
      - Weight Tracker Resource
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WeightTrackerEntry'
      responses:
        "201":
          description: Created
  /tracker/weight/delete/{id}:
    delete:
      tags:
      - Weight Tracker Resource
      parameters:
      - name: id
        in: path
        required: true
        schema:
          format: int64
          type: integer
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: boolean
  /tracker/weight/list/{userId}:
    get:
      tags:
      - Weight Tracker Resource
      parameters:
      - name: userId
        in: path
        required: true
        schema:
          format: int64
          type: integer
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/WeightTrackerEntry'
  /tracker/weight/read/{id}:
    get:
      tags:
      - Weight Tracker Resource
      parameters:
      - name: id
        in: path
        required: true
        schema:
          format: int64
          type: integer
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WeightTrackerEntry'
  /tracker/weight/update:
    put:
      tags:
      - Weight Tracker Resource
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WeightTrackerEntry'
      responses:
        "204":
          description: No Content
  /user/login:
    post:
      tags:
      - User Resource
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LibreUser'
      responses:
        "200":
          description: OK
          content:
            application/json: {}
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "500":
          description: Internal Server Error
  /user/register:
    post:
      tags:
      - User Resource
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LibreUser'
      responses:
        "200":
          description: OK
          content:
            application/json: {}
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "500":
          description: Internal Server Error
components:
  schemas:
    CalculationGoal:
      enum:
      - GAIN
      - LOSS
      type: string
    CalculationSex:
      enum:
      - MALE
      - FEMALE
      type: string
    CalorieTrackerEntry:
      required:
      - added
      - category
      type: object
      properties:
        userId:
          format: int64
          type: integer
        added:
          $ref: '#/components/schemas/LocalDate'
        id:
          format: int64
          type: integer
        amount:
          format: float
          type: number
        category:
          $ref: '#/components/schemas/Category'
        updated:
          type: string
          allOf:
          - $ref: '#/components/schemas/LocalDateTime'
          nullable: true
        description:
          type: string
          nullable: true
    Category:
      enum:
      - BREAKFAST
      - LUNCH
      - DINNER
      - SNACK
      - UNSET
      type: string
    ErrorResponse:
      required:
      - message
      type: object
      properties:
        message:
          type: string
    Goal:
      required:
      - added
      - startDate
      - endDate
      type: object
      properties:
        userId:
          format: int64
          type: integer
        added:
          $ref: '#/components/schemas/LocalDate'
        id:
          format: int64
          type: integer
        startAmount:
          format: float
          type: number
          nullable: true
        endAmount:
          format: float
          type: number
          nullable: true
        startDate:
          $ref: '#/components/schemas/LocalDateTime'
        endDate:
          $ref: '#/components/schemas/LocalDateTime'
    LibreUser:
      required:
      - email
      - password
      type: object
      properties:
        id:
          format: int64
          type: integer
        email:
          type: string
        password:
          type: string
        name:
          type: string
          nullable: true
        registered:
          type: string
          allOf:
          - $ref: '#/components/schemas/LocalDateTime'
          nullable: true
        lastLogin:
          type: string
          allOf:
          - $ref: '#/components/schemas/LocalDateTime'
          nullable: true
    LocalDate:
      format: date
      type: string
      example: 2022-03-10
    LocalDateTime:
      format: date-time
      type: string
      example: 2022-03-10T12:15:50
    Tdee:
      required:
      - age
      - sex
      - weight
      - height
      - activityLevel
      - weeklyDifference
      - calculationGoal
      type: object
      properties:
        age:
          type: number
        sex:
          $ref: '#/components/schemas/CalculationSex'
        weight:
          type: number
        height:
          type: number
        activityLevel:
          type: number
        weeklyDifference:
          type: number
        calculationGoal:
          $ref: '#/components/schemas/CalculationGoal'
        bmr:
          format: double
          type: number
        tdee:
          format: double
          type: number
        deficit:
          format: float
          type: number
        target:
          format: float
          type: number
    WeightTrackerEntry:
      required:
      - added
      - updated
      type: object
      properties:
        userId:
          format: int64
          type: integer
        added:
          $ref: '#/components/schemas/LocalDate'
        id:
          format: int64
          type: integer
        amount:
          format: float
          type: number
          nullable: true
        updated:
          $ref: '#/components/schemas/LocalDateTime'
